## PROOF OF APPROVAL (POA) - 可能是更好的区块链共识协议（连载二）

## Introduction
今天的主题是探讨目前一些比较常见的共识协议，并比较各自的优势和劣势。

区块链的安全与稳定取决于共识协议。只有共识协议能够在面临物理故障或恶意攻击时维持区块链的状态，才能保证区块链的不可更改性和可追溯性。共识协议的选择，直接决定了数据的安全。


## Proof-of-Work(POW)，俗称工作证明机制

当前两大主流加密货币采用的共识机制，这种机制下，任何节点都可以通过解决一个数学问题来提供候选区块并获取奖励，这个过程即挖矿。

优点：可靠，这就是它最大的优点，因为它是目前唯一接受了实践检验的公有链算法。

缺点：这种算法容易受到两类攻击。一种是 51% 攻击，即全网部分节点串通起来，统治 51% 或以上的算力来伪造主区块链的数据，最终导致加密货币共识受损、信用崩盘；另一种就是自私挖矿 (Selfish Mining)，即恶意攻击者在挖到新区块后不进行广播，而其他诚实矿工继续在旧区块基础上进行挖矿。等到攻击者挖到第二枚区块后便会同时公布手中藏着的两枚区块，这时，区块链分叉就出现了。只要攻击者比诚实矿工多挖一枚区块，攻击者所在的分叉就是最长链：根据比特币的共识机制，矿工只在最长链后面挖矿。因此，原本诚实矿工们所在的那条链，因为比攻击者的分叉短，便作废了。此时此刻，攻击者因为挖到了两枚新区块而获得相应收益；而诚实矿工的分叉被废弃，他们什么也得不到。根据权威数学模型推导，进行自私挖矿的攻击者只需要拥有全网 1/3 的算力，就可以保证自己获得更多的收益了。相比 51% 攻击，自私挖矿显得更容易，更有吸引力。

尽管如此，POW仍然是近年来比较成功的一种共识算法，扩展性也不错。但鉴于对资源的过多浪费，这种算法的成本太高。


## Proof-of-Stake (POS)，俗称权益证明机制

POS 共识算法的出现是为了摆脱 POW 的算力浪费，与要求证明人执行一定量的计算工作不同，权益证明要求证明人提供一定数量加密货币的所有权即可。

优点：不需要浪费算力，同时，进行51%攻击的代价更高，因为想要进行51%攻击的话，你得拥有51%的货币。也就是说，这东西越值钱，攻击的成本就越高。

缺点：钱越多，拥有的权力就越大。但利益越多的人，就更愿意去维护这个币的系统，于是他们手中的币才能更有价值。因此，他们并不愿意去进行恶意攻击，因为那样实际上他们手中的币也会受害，这就是POS能够更有效地防御51%攻击的原因。但反过来讲，钱越少责任越小。假设你只有1%的钱，你成功的概率只有1%，但是你尽可以去尝试分叉，因为这并不消耗任何资源。也就是你在最长链上挖矿的同时，也去创造一个只在自己的区块上挖矿的分支。放在POW里，创建这个分支完全得不偿失因为你浪费了大量的算力。然而在POS里，如果这个分支不被接收，实际上你什么都没损失。于是，即便是诚实的矿工也可能回去偷偷地进行这种分叉尝试。尽管他们知道这种尝试会造成整个币的价值降低，但是他们的钱很少，他们并不在乎。基本上所有的新的POS算法都有应对的机制，例如以太坊的casper里的slasher，基本概念就是如果有人尝试了这种攻击，其他人发现了可以公布证据然后对这个人进行惩罚。